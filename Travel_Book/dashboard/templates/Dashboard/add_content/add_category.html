{% extends "Dashboard/base_dashboard.html" %}
{% load static %}

{% block content %}
<div class="md:w-3/4 bg-gray-800 rounded-xl p-6">
    {% if messages %}
    {% for message in messages %}
    <div class="mb-4 p-3 rounded-lg
        {% if message.tags == 'error' %}
            bg-red-500/20 text-red-400
        {% else %}
            bg-green-500/20 text-green-400
        {% endif %}
    ">
        {{ message }}
    </div>
    {% endfor %}
    {% endif %}



    <h2 class="text-2xl font-bold mb-6">Add Category</h2>

    <form method="post" enctype="multipart/form-data" class="space-y-6">
        {% csrf_token %}

        <!-- Title -->
        <div>
            <label class="block text-sm font-medium mb-1">Category Name</label>
            <input type="text" name="name" required
                class="w-full rounded-md bg-white/5 px-3 py-2 text-white outline-none focus:ring-2 focus:ring-indigo-500">
        </div>


        <!-- Highlights -->
        <div>
            <label class="block text-sm font-medium mb-1">Description</label>
            <textarea name="descriptions" rows="6" class="w-full rounded-md bg-white/5 px-3 py-2 text-white"
                placeholder="Write about Category....."></textarea>
        </div>


        <!-- Submit -->
        <div class="flex justify-center">
            <button type="submit" class="bg-indigo-500 hover:bg-indigo-600 px-8 py-2 rounded-md font-semibold" onsubmit="successmessages()">
                Save Category
            </button>
        </div>

    </form>
    <script>
        function successmessages(){
            alert("Category Added Successfully")
        }
    </script>
    <!-- Category List -->
    <h2>All Categories</h2>
    <div class="grid grid-cols-3 gap-5 my-5">
        {% for cat in categories %}
        <div onclick="openCategoryPopup('{{ cat.name }}', '{{ cat.descriptions|escapejs }}')" class="p-3 text-center border border-white/20 rounded-lg
               cursor-pointer text-white
               hover:bg-white/10 transition">

            {{ cat.name }}
        </div>
        {% endfor %}
    </div>

    <!-- Popup Modal -->
    <div id="categoryModal" class="fixed inset-0 bg-black/60 hidden
            flex items-center justify-center z-50">

        <div class="bg-slate-900 p-6 rounded-xl w-96 relative">
            <!-- Close Button -->
            <button onclick="closeCategoryPopup()" class="absolute top-2 right-2 text-white/70 hover:text-white">
                âœ•
            </button>

            <h2 id="modalTitle" class="text-xl font-semibold text-white mb-3"></h2>
            <p id="modalDescription" class="text-white/80"></p>
        </div>
    </div>

    <script>
    function openCategoryPopup(name, description) {
        document.getElementById("modalTitle").innerText = name;
        document.getElementById("modalDescription").innerText = description;
        document.getElementById("categoryModal").classList.remove("hidden");
    }

    function closeCategoryPopup() {
        document.getElementById("categoryModal").classList.add("hidden");
    }
</script>


</div>
{% endblock %}