{% extends 'Dashboard/base_dashboard.html' %}


{% load static %}

{% block content %}



<div class="md:w-3/4">
    
    <h1 class="text-3xl font-bold mb-8">Dashboard Overview</h1>

    <!-- Stats Cards -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
        <div class="bg-gray-800 rounded-xl p-6">
            <a href="{% url 'trip' %}">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-400">Total Trips</p>
                        <h3 class="text-2xl font-bold">{{total_trips_count}}</h3>
                    </div>
                    <div class="p-3 rounded-full bg-primary-500/20 text-primary-500">
                        <i data-feather="map" class="w-6 h-6"></i>
                    </div>
                </div>
            </a>
        </div>
        <div class="bg-gray-800 rounded-xl p-6">
            <a href="{% url 'blogs' %}">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-400">Blog Posts</p>
                        <h3 class="text-2xl font-bold">{{total_blogs_count}}</h3>
                    </div>
                    <div class="p-3 rounded-full bg-primary-500/20 text-primary-500">
                        <i data-feather="book" class="w-6 h-6"></i>
                    </div>
                </div>
            </a>
        </div>
        <div class="bg-gray-800 rounded-xl p-6">
            <a href="{% url 'gallery' %}">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-400">Photos</p>
                        <h3 class="text-2xl font-bold">{{total_photos_count}}</h3>
                    </div>
                    <div class="p-3 rounded-full bg-primary-500/20 text-primary-500">
                        <i data-feather="image" class="w-6 h-6"></i>
                    </div>
                </div>
            </a>
        </div>
    </div>

    <!-- Recent Trips -->
    <div class="bg-gray-800 rounded-xl p-6 mb-8">
        <div class="flex items-center justify-between mb-6">
            <h2 class="text-xl font-bold">Recent Trips</h2>
            <a href="trips.html" class="text-primary-500 hover:underline">View All</a>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

            {% if recent_travel_entries %}

            {% for list in recent_travel_entries %}
            <div class="bg-gray-700 rounded-lg overflow-hidden">
                {% if list.cover_photo.url %}
                <img src="{{list.cover_photo.url}}" alt="Trip" class="w-full h-40 object-cover">
                {% else %}
                <img src="{% static 'images/default_cover_photo.png' %}" alt="Trip" class="w-full h-40 object-cover">
                {% endif %}

                <div class="p-4">
                    <div class="title flex items-center justify-between">
                        <h3 class="font-semibold mb-1"><a href="{% url 'diary_detail' list.id %}">{{list.title}}</a>
                        </h3>
                        <h2>
                            {{list.categories.name|default:"Not Mentioned"}}
                        </h2>
                    </div>
                    <p class="text-sm text-gray-400 mb-2">{{list.start_date}} - {{list.end_date}}</p>
                    <div class="flex items-center text-sm text-gray-400">
                        <i data-feather="map-pin" class="w-4 h-4 mr-1"></i>
                        <span>{{list.location}}</span>
                    </div>
                </div>
            </div>

            {% endfor %}

            {% else %}
            <div class="w-full max-w-5xl bg-gradient-to-b from-slate-900 to-slate-950
           border border-white/10 rounded-2xl
           flex flex-col items-center justify-center
           px-6 py-12 sm:py-10 text-center shadow-xl">

                <!-- Icon -->
                <div class="mb-6 flex h-14 w-14 items-center justify-center
             rounded-xl border border-white/20 bg-white/5">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-white/70" fill="none"
                        viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                    </svg>
                </div>

                <!-- Title -->
                <h2 class="text-lg sm:text-xl font-semibold text-white">
                    No Diary Entries
                </h2>

                <!-- Subtitle -->
                <p class="mt-2 text-sm sm:text-base text-white/60 max-w-md">
                    Get started by creating a new project.
                </p>

                <!-- Button -->
                <button class="mt-6 inline-flex items-center gap-2
             rounded-lg bg-indigo-500 px-5 py-2.5
             text-sm sm:text-base font-medium text-white
             hover:bg-indigo-600 transition
             focus:outline-none focus:ring-2 focus:ring-indigo-400">

                    <span class="text-lg">+</span>
                    <a href="{% url 'add_diary' %}">Add</a>
                </button>

            </div>

            {% endif %}
        </div>
    </div>

    <!-- Upcoming Trips -->
    <div class="bg-gray-800 rounded-xl p-6">
        <div class="flex items-center justify-between mb-6">
            <h2 class="text-xl font-bold">Upcoming Trips</h2>
            <a href="{% url 'trip' %}" class="text-primary-500 hover:underline">View All</a>
        </div>
        <div class="space-y-4">
            {% if recent_plan_entries %}

            {% for plans in recent_plan_entries %}
            <div class="flex items-center justify-between p-4 bg-gray-700 rounded-lg">
                <div class="flex items-center">
                    <div class="p-3 rounded-full bg-secondary-500/20 text-secondary-500 mr-4">
                        <i data-feather="calendar" class="w-5 h-5"></i>
                    </div>
                    <div>
                        <h3 class="font-semibold">{{plans.title}}</h3>
                        <p class="text-sm text-gray-400">{{plans.start_date}} - {{plans.end_date}}</p>
                    </div>
                </div>
                <button class="p-2 rounded-full bg-gray-600 hover:bg-gray-500 transition">
                    <a href="{% url 'edit_plantrip' plans.id %}"><i data-feather="more-vertical"
                            class="w-5 h-5"></i></a>
                </button>
            </div>
            {% endfor %}

            {% else %}
            <div class="w-full max-w-5xl bg-gradient-to-b from-slate-900 to-slate-950
           border border-white/10 rounded-2xl
           flex flex-col items-center justify-center
           px-6 py-12 sm:py-10 text-center shadow-xl">

                <!-- Icon -->
                <div class="mb-4 flex h-10 w-10 items-center justify-center
             rounded-xl border border-white/20 bg-white/5">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white/70" fill="none"
                        viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                    </svg>
                </div>

                <!-- Title -->
                <h2 class="text-lg sm:text-xl font-semibold text-white">
                    No Upcoming Trips
                </h2>

                <!-- Subtitle -->
                <p class="mt-2 text-sm sm:text-base text-white/60 max-w-md">
                    Get started by creating a new project.
                </p>

                <!-- Button -->
                <button class="mt-3 inline-flex items-center gap-2
             rounded-lg bg-indigo-500 px-5 py-2.5
             text-sm sm:text-base font-medium text-white
             hover:bg-indigo-600 transition
             focus:outline-none focus:ring-2 focus:ring-indigo-400">

                    <span class="text-lg">+</span>
                    <a href="{% url 'plan_trip' %}">Add</a>

                </button>

            </div>

            {% endif %}
        </div>
    </div>
</div>


{% endblock content %}